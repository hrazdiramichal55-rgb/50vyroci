<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktivní Harmonogram Akce - 50. Výročí Školy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Energetic and Striking (Orange, Green, Black) -->
    <!-- Application Structure Plan: A dashboard-style single-page application. The top section provides a static overview of the day's main events. The central part is an an interactive dashboard allowing users to filter the detailed schedule either by student group or by activity station using dropdown menus. This provides immediate access to task-specific information, which is more user-friendly than scanning a large table. Additionally, a doughnut chart visualizes the thematic distribution of activities, offering a quick analytical insight. This structure was chosen to transform the static reports into a user-centric tool that answers the most likely questions from organizers and teachers efficiently. -->
    <!-- Visualization & Content Choices: 
        1. Main Timeline (Report Info: Harmonogram_akce.md) -> Goal: Inform -> Presentation: Styled cards (HTML/Tailwind) -> Interaction: None -> Justification: Provides high-level context of the day's flow.
        2. Interactive Schedule (Report Info: Rozpis_stanovišť.md) -> Goal: Organize/Filter -> Presentation: Dropdown filters and a dynamically updated content area -> Interaction: User selects a group or station, JS filters data and updates the view -> Justification: Core interactive feature. Allows users to easily find specific schedules without reading a complex grid. Method: Vanilla JS.
        3. Activity Distribution (Report Info: List of stations) -> Goal: Analyze -> Presentation: Doughnut Chart -> Interaction: Hover tooltips -> Justification: Gives a quick visual summary of the types of activities planned for the day. Library: Chart.js.
        4. Master Schedule (Report Info: Rozpis_stanovišť.md) -> Goal: Compare/Reference -> Presentation: Full HTML table inside a collapsible element -> Interaction: Click to expand/collapse -> Justification: Provides access to all data for users who need a complete overview, but keeps the main interface clean. Method: HTML <details> tag.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://www.zsostrovum.cz/evt_image.php?img=19301');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
            color: #1a202c; 
        }
        .main-container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .photo-gallery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
</head>
<body class="antialiased text-gray-800">
    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <img src="https://www.zsostrovum.cz/data/multipage/editor/editor-6-46-cs_2.png?gcm_date=1700646047" alt="ZŠ MŠ Ostrov u Macochy" class="mx-auto h-24 mb-4">
            <h1 class="text-4xl md:text-5xl font-bold text-green-600">Harmonogram Akce</h1>
            <p class="text-4x1 md:text-4xl text-orange-600 mt-2">Oslava 50. výročí založení školy</p>
        </header>

        <main class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <section id="timeline" class="mb-12">
                <h2 class="text-2xl font-semibold text-center mb-6 text-gray-700">Hlavní body dne</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 text-center">
                    <div class="bg-gray-100 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="font-bold text-lg text-green-600">8:00 - 8:15</p>
                        <p class="text-gray-700">Slavnostní zahájení</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="font-bold text-lg text-green-600">8:15 - 8:30</p>
                        <p class="text-gray-700">Vystoupení 1. třídy</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg shadow-sm border border-gray-200 col-span-1 lg:col-span-1">
                        <p class="font-bold text-lg text-orange-600">8:30 - 12:30</p>
                        <p class="text-gray-700">Program na stanovištích</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="font-bold text-lg text-amber-600">9:30 - 9:50</p>
                        <p class="text-gray-700">Svačinová přestávka</p>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="font-bold text-lg text-rose-600">12:30</p>
                        <p class="text-gray-700">Ukončení akce</p>
                    </div>
                </div>
            </section>

            <section id="interactive-dashboard" class="bg-gray-100 p-6 rounded-xl shadow-md border border-gray-200 mb-12">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-700">Interaktivní přehled programu</h2>
                    <p class="text-gray-600 mt-2">Zvolte skupinu nebo stanoviště pro zobrazení detailního časového plánu.</p>
                </div>
                <div class="flex flex-col md:flex-row justify-center items-center gap-4 mb-6">
                    <div class="w-full md:w-1/3">
                        <label for="group-select" class="block text-sm font-medium text-gray-700 mb-1">Zobrazit podle skupiny:</label>
                        <select id="group-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-400 focus:border-green-400 bg-white text-gray-800">
                            <option value="all">Vyberte skupinu</option>
                        </select>
                    </div>
                    <div class="w-full md:w-1/3">
                        <label for="station-select" class="block text-sm font-medium text-gray-700 mb-1">Zobrazit podle stanoviště:</label>
                        <select id="station-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-400 focus:border-green-400 bg-white text-gray-800">
                            <option value="all">Vyberte stanoviště</option>
                        </select>
                    </div>
                     <div class="w-full md:w-auto mt-4 md:mt-5">
                        <button id="reset-button" class="w-full md:w-auto bg-green-400 text-gray-900 px-4 py-2 rounded-md hover:bg-green-500 transition-colors">Resetovat</button>
                    </div>
                </div>
                <div id="schedule-display" class="mt-4 min-h-[200px]">
                    <p class="text-center text-gray-500">Zde se zobrazí vybraný program.</p>
                </div>
            </section>
            
            <section class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center mb-12">
                <div id="chart-section" class="bg-gray-100 p-6 rounded-xl shadow-md border border-gray-200">
                    <h2 class="text-2xl font-semibold text-center mb-4 text-gray-700">Rozložení typů aktivit</h2>
                    <div class="chart-container">
                        <canvas id="activityChart"></canvas>
                    </div>
                </div>

                <div class="bg-gray-100 p-6 rounded-xl shadow-md border border-gray-200">
                     <h2 class="text-2xl font-semibold text-center mb-4 text-gray-700">Celkový přehled</h2>
                     <p class="text-center text-gray-600 mb-4">Níže naleznete kompletní matici rozvrhu pro všechny skupiny a časy. Tato tabulka může být užitečná pro koordinátory a učitele, kteří potřebují vidět celkový obraz dne.</p>
                     <details class="bg-white p-4 rounded-md">
                        <summary class="font-semibold cursor-pointer text-orange-600 hover:text-orange-700">Zobrazit kompletní rozpis stanovišť</summary>
                        <div class="overflow-x-auto mt-4">
                            <table id="master-schedule-table" class="min-w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-200">
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </details>
                </div>
            </section>

            <section id="photo-link-section" class="bg-gray-100 p-6 rounded-xl shadow-md border border-gray-200 mb-12">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-700">Fotogalerie z akce</h2>
                    <p class="text-gray-600 mt-2">Fotky z akce najdete v naší sdílené složce na Google Disku.</p>
                </div>
                <div class="flex justify-center">
                    <a href="https://drive.google.com/drive/folders/19xO_2oWYizGD0q3l_H-T_SAimfo0KqrA?usp=drive_link" target="_blank" class="w-full md:w-auto bg-green-400 text-gray-900 px-6 py-3 rounded-md hover:bg-green-500 transition-colors font-medium text-center">Otevřít fotogalerii</a>
                </div>
            </section>

        </main>
    </div>

    <script type="module">
        document.addEventListener('DOMContentLoaded', async function () {
            
            const scheduleData = [
                { time: '8:30 - 8:50', group: 'Skupina 1', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '8:50 - 9:10', group: 'Skupina 1', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '9:10 - 9:30', group: 'Skupina 1', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '9:50 - 10:10', group: 'Skupina 1', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '10:10 - 10:30', group: 'Skupina 1', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '10:30 - 10:50', group: 'Skupina 1', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '10:50 - 11:10', group: 'Skupina 1', activity: 'Robotika', location: 'Robotika' },
                { time: '11:10 - 11:30', group: 'Skupina 1', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '11:30 - 11:50', group: 'Skupina 1', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '11:50 - 12:10', group: 'Skupina 1', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '12:10 - 12:30', group: 'Skupina 1', activity: 'Zdobení perníčků', location: 'Kuchyňka' },

                { time: '8:30 - 8:50', group: 'Skupina 2', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '8:50 - 9:10', group: 'Skupina 2', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '9:10 - 9:30', group: 'Skupina 2', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '9:50 - 10:10', group: 'Skupina 2', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '10:10 - 10:30', group: 'Skupina 2', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '10:30 - 10:50', group: 'Skupina 2', activity: 'Robotika', location: 'Robotika' },
                { time: '10:50 - 11:10', group: 'Skupina 2', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '11:10 - 11:30', group: 'Skupina 2', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '11:30 - 11:50', group: 'Skupina 2', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '11:50 - 12:10', group: 'Skupina 2', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '12:10 - 12:30', group: 'Skupina 2', activity: 'Malování karikatur', location: 'Před školou' },
                
                { time: '8:30 - 8:50', group: 'Skupina 3', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '8:50 - 9:10', group: 'Skupina 3', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '9:10 - 9:30', group: 'Skupina 3', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '9:50 - 10:10', group: 'Skupina 3', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '10:10 - 10:30', group: 'Skupina 3', activity: 'Robotika', location: 'Robotika' },
                { time: '10:30 - 10:50', group: 'Skupina 3', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '10:50 - 11:10', group: 'Skupina 3', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '11:10 - 11:30', group: 'Skupina 3', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '11:30 - 11:50', group: 'Skupina 3', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '11:50 - 12:10', group: 'Skupina 3', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '12:10 - 12:30', group: 'Skupina 3', activity: 'Retro třída', location: 'Učebna 503' },
                
                { time: '8:30 - 8:50', group: 'Skupina 4', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '8:50 - 9:10', group: 'Skupina 4', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '9:10 - 9:30', group: 'Skupina 4', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '9:50 - 10:10', group: 'Skupina 4', activity: 'Robotika', location: 'Robotika' },
                { time: '10:10 - 10:30', group: 'Skupina 4', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '10:30 - 10:50', group: 'Skupina 4', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '10:50 - 11:10', group: 'Skupina 4', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '11:10 - 11:30', group: 'Skupina 4', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '11:30 - 11:50', group: 'Skupina 4', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '11:50 - 12:10', group: 'Skupina 4', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '12:10 - 12:30', group: 'Skupina 4', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },

                { time: '8:30 - 8:50', group: 'Skupina 5', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '8:50 - 9:10', group: 'Skupina 5', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '9:10 - 9:30', group: 'Skupina 5', activity: 'Robotika', location: 'Robotika' },
                { time: '9:50 - 10:10', group: 'Skupina 5', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '10:10 - 10:30', group: 'Skupina 5', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '10:30 - 10:50', group: 'Skupina 5', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '10:50 - 11:10', group: 'Skupina 5', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '11:10 - 11:30', group: 'Skupina 5', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '11:30 - 11:50', group: 'Skupina 5', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '11:50 - 12:10', group: 'Skupina 5', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '12:10 - 12:30', group: 'Skupina 5', activity: 'Kreativní dílna', location: 'Učebna 302' },

                { time: '8:30 - 8:50', group: 'Skupina 6', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '8:50 - 9:10', group: 'Skupina 6', activity: 'Robotika', location: 'Robotika' },
                { time: '9:10 - 9:30', group: 'Skupina 6', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '9:50 - 10:10', group: 'Skupina 6', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '10:10 - 10:30', group: 'Skupina 6', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '10:30 - 10:50', group: 'Skupina 6', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '10:50 - 11:10', group: 'Skupina 6', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '11:10 - 11:30', group: 'Skupina 6', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '11:30 - 11:50', group: 'Skupina 6', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '11:50 - 12:10', group: 'Skupina 6', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '12:10 - 12:30', group: 'Skupina 6', activity: 'Školní kvíz', location: 'Učebna 504' },

                { time: '8:30 - 8:50', group: 'Skupina 7', activity: 'Robotika', location: 'Robotika' },
                { time: '8:50 - 9:10', group: 'Skupina 7', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '9:10 - 9:30', group: 'Skupina 7', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '9:50 - 10:10', group: 'Skupina 7', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '10:10 - 10:30', group: 'Skupina 7', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '10:30 - 10:50', group: 'Skupina 7', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '10:50 - 11:10', group: 'Skupina 7', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '11:10 - 11:30', group: 'Skupina 7', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '11:30 - 11:50', group: 'Skupina 7', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '11:50 - 12:10', group: 'Skupina 7', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '12:10 - 12:30', group: 'Skupina 7', activity: 'Hravá věda', location: 'Učebna 508' },
                
                { time: '8:30 - 8:50', group: 'Skupina 8', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '8:50 - 9:10', group: 'Skupina 8', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '9:10 - 9:30', group: 'Skupina 8', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '9:50 - 10:10', group: 'Skupina 8', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '10:10 - 10:30', group: 'Skupina 8', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '10:30 - 10:50', group: 'Skupina 8', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '10:50 - 11:10', group: 'Skupina 8', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '11:10 - 11:30', group: 'Skupina 8', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '11:30 - 11:50', group: 'Skupina 8', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '11:50 - 12:10', group: 'Skupina 8', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '12:10 - 12:30', group: 'Skupina 8', activity: 'Robotika', location: 'Robotika' },

                { time: '8:30 - 8:50', group: 'Skupina 9', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '8:50 - 9:10', group: 'Skupina 9', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '9:10 - 9:30', group: 'Skupina 9', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '9:50 - 10:10', group: 'Skupina 9', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '10:10 - 10:30', group: 'Skupina 9', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '10:30 - 10:50', group: 'Skupina 9', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '10:50 - 11:10', group: 'Skupina 9', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '11:10 - 11:30', group: 'Skupina 9', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '11:30 - 11:50', group: 'Skupina 9', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '11:50 - 12:10', group: 'Skupina 9', activity: 'Robotika', location: 'Robotika' },
                { time: '12:10 - 12:30', group: 'Skupina 9', activity: 'Stolní hry', location: 'Učebna 305' },

                { time: '8:30 - 8:50', group: 'Skupina 10', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
                { time: '8:50 - 9:10', group: 'Skupina 10', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '9:10 - 9:30', group: 'Skupina 10', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '9:50 - 10:10', group: 'Skupina 10', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '10:10 - 10:30', group: 'Skupina 10', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '10:30 - 10:50', group: 'Skupina 10', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '10:50 - 11:10', group: 'Skupina 10', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '11:10 - 11:30', group: 'Skupina 10', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '11:30 - 11:50', group: 'Skupina 10', activity: 'Robotika', location: 'Robotika' },
                { time: '11:50 - 12:10', group: 'Skupina 10', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '12:10 - 12:30', group: 'Skupina 10', activity: 'iPady (animace)', location: 'Učebna 506' },

                { time: '8:30 - 8:50', group: 'Skupina 11', activity: 'Zdobení perníčků', location: 'Kuchyňka' },
                { time: '8:50 - 9:10', group: 'Skupina 11', activity: 'Malování karikatur', location: 'Před školou' },
                { time: '9:10 - 9:30', group: 'Skupina 11', activity: 'Retro třída', location: 'Učebna 503' },
                { time: '9:50 - 10:10', group: 'Skupina 11', activity: 'Sportovní aktivity', location: 'Hřiště, gymnastický sál' },
                { time: '10:10 - 10:30', group: 'Skupina 11', activity: 'Kreativní dílna', location: 'Učebna 302' },
                { time: '10:30 - 10:50', group: 'Skupina 11', activity: 'Školní kvíz', location: 'Učebna 504' },
                { time: '10:50 - 11:10', group: 'Skupina 11', activity: 'Hravá věda', location: 'Učebna 508' },
                { time: '11:10 - 11:30', group: 'Skupina 11', activity: 'Robotika', location: 'Robotika' },
                { time: '11:30 - 11:50', group: 'Skupina 11', activity: 'Stolní hry', location: 'Učebna 305' },
                { time: '11:50 - 12:10', group: 'Skupina 11', activity: 'iPady (animace)', location: 'Učebna 506' },
                { time: '12:10 - 12:30', group: 'Skupina 11', activity: 'Ochutnávka ovoce', location: 'Školní jídelna' },
            ];

            const groupSelect = document.getElementById('group-select');
            const stationSelect = document.getElementById('station-select');
            const scheduleDisplay = document.getElementById('schedule-display');
            const resetButton = document.getElementById('reset-button');
            const masterTable = document.getElementById('master-schedule-table');
            const thead = masterTable.querySelector('thead');
            const tbody = masterTable.querySelector('tbody');

            const groups = [...new Set(scheduleData.map(item => item.group))].sort((a, b) => parseInt(a.split(' ')[1]) - parseInt(b.split(' ')[1]));
            const stations = [...new Set(scheduleData.map(item => item.activity))].sort();

            const parseTime = (timeStr) => {
                const [start, end] = timeStr.split(' - ').map(t => {
                    const [hour, minute] = t.split(':').map(Number);
                    return hour * 60 + minute;
                });
                return { start, end };
            };

            const sortScheduleDataAsc = (data) => {
                return data.sort((a, b) => parseTime(a.time).start - parseTime(b.time).start);
            };

            groups.forEach(group => {
                const option = document.createElement('option');
                option.value = group;
                option.textContent = group;
                groupSelect.appendChild(option);
            });

            stations.forEach(station => {
                const option = document.createElement('option');
                option.value = station;
                option.textContent = station;
                stationSelect.appendChild(option);
            });

            function updateDisplay() {
                const selectedGroup = groupSelect.value;
                const selectedStation = stationSelect.value;

                if (selectedGroup === 'all' && selectedStation === 'all') {
                    scheduleDisplay.innerHTML = '<p class="text-center text-gray-500">Zvolte skupinu nebo stanoviště pro zobrazení programu.</p>';
                    return;
                }

                let filteredData;
                let isGroupView = selectedGroup !== 'all';

                if (isGroupView) {
                    filteredData = scheduleData.filter(item => item.group === selectedGroup);
                    stationSelect.value = 'all'; 
                } else {
                    filteredData = scheduleData.filter(item => item.activity === selectedStation);
                    groupSelect.value = 'all';
                }

                if (filteredData.length === 0) {
                    scheduleDisplay.innerHTML = '<p class="text-center text-gray-500">Pro tuto volbu nebyly nalezeny žádné záznamy.</p>';
                    return;
                }
                
                let title = isGroupView ? `Program pro ${selectedGroup}` : `Návštěvnost stanoviště: ${selectedStation}`;

                let tableHTML = `<h3 class="text-xl font-semibold text-center mb-4 text-gray-700">${title}</h3>
                <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-200">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700">Čas</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700">${isGroupView ? 'Stanoviště' : 'Skupina'}</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700">Místo</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">`;
                
                let sortedData = [];
                if(isGroupView){
                    const snackTime = { time: '9:30 - 9:50', activity: 'Svačina', location: '---' };
                    sortedData = sortScheduleDataAsc([...filteredData, snackTime]);
                } else {
                    sortedData = sortScheduleDataAsc(filteredData);
                }

                sortedData.forEach(item => {
                    const isSnack = item.activity === 'Svačina';
                    tableHTML += `<tr class="${isSnack ? 'bg-amber-100' : 'bg-white'}">
                        <td class="px-6 py-4 whitespace-nowrap font-medium ${isSnack ? 'text-amber-800' : 'text-gray-900'}">${item.time}</td>
                        <td class="px-6 py-4 whitespace-nowrap ${isSnack ? 'font-bold text-amber-800' : 'text-gray-700'}">${item.activity}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-gray-700">${item.location}</td>
                    </tr>`;
                });
                
                tableHTML += `</tbody></table></div>`;
                scheduleDisplay.innerHTML = tableHTML;
            }
            
            function resetFilters() {
                groupSelect.value = 'all';
                stationSelect.value = 'all';
                updateDisplay();
            }

            groupSelect.addEventListener('change', updateDisplay);
            stationSelect.addEventListener('change', updateDisplay);
            resetButton.addEventListener('click', resetFilters);

            const activityCategories = {
                'Kreativní': ['Malování karikatur', 'Kreativní dílna', 'Zdobení perníčků'],
                'Vzdělávací': ['Retro třída', 'Školní kvíz', 'Hravá věda'],
                'Technologické': ['Robotika', 'iPady (animace)'],
                'Sportovní': ['Sportovní aktivity'],
                'Gastronomické': ['Ochutnávka ovoce'],
                'Herní': ['Stolní hry']
            };

            const categoryCounts = Object.keys(activityCategories).reduce((acc, category) => {
                acc[category] = activityCategories[category].length;
                return acc;
            }, {});

            const ctx = document.getElementById('activityChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(categoryCounts),
                    datasets: [{
                        label: 'Počet aktivit',
                        data: Object.values(categoryCounts),
                        backgroundColor: [
                            '#fb923c', // orange-400
                            '#34d399', // emerald-400
                            '#60a5fa', // blue-400
                            '#f87171', // red-400
                            '#a78bfa', // violet-400
                            '#fbbf24'  // amber-400
                        ],
                        borderColor: '#ffffff', 
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                             labels: {
                                padding: 20,
                                color: '#333',
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed;
                                    }
                                    return label + ' aktivit';
                                }
                            }
                        }
                    }
                }
            });

            function populateMasterTable() {
                const masterTable = document.getElementById('master-schedule-table');
                const thead = masterTable.querySelector('thead');
                const tbody = masterTable.querySelector('tbody');

                const times = ['8:30 - 8:50', '8:50 - 9:10', '9:10 - 9:30', '9:50 - 10:10', '10:10 - 10:30', '10:30 - 10:50', '10:50 - 11:10', '11:10 - 11:30', '11:30 - 11:50', '11:50 - 12:10', '12:10 - 12:30'];
                
                let headerHTML = '<tr><th scope="col" class="py-3 px-6">Skupina</th>';
                times.forEach(time => headerHTML += `<th scope="col" class="py-3 px-6">${time}</th>`);
                headerHTML += '</tr>';
                thead.innerHTML = headerHTML;

                let bodyHTML = '';
                groups.forEach((group, index) => {
                    bodyHTML += `<tr class="${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'} border-b">
                        <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap">${group}</td>`;
                    
                    const groupSchedule = sortScheduleDataAsc(scheduleData.filter(item => item.group === group));
                    
                    times.forEach(timeSlot => {
                        const activity = groupSchedule.find(item => item.time === timeSlot);
                        bodyHTML += `<td class="py-4 px-6 text-gray-700">${activity ? activity.activity : '---'}</td>`;
                    });

                    bodyHTML += '</tr>';
                });
                tbody.innerHTML = bodyHTML;
            }

            populateMasterTable();
        });
    </script>
</body>
</html>
